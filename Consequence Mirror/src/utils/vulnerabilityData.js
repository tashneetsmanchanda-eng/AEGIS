/**
 * Vulnerability Data for Multi-Sector Triage Heatmap
 * Based on primary research data for Raipur region
 * Each point represents population vulnerability density
 */

// Raipur, Chhattisgarh coordinates (center)
const RAIPUR_CENTER = [21.2514, 81.6296]

/**
 * Generate vulnerability data points around a center location
 * Density values represent population vulnerability (0-1 scale)
 */
export const generateVulnerabilityData = (center = RAIPUR_CENTER, pointCount = 50) => {
  const data = []
  
  // Generate points in a grid pattern around center
  const gridSize = Math.ceil(Math.sqrt(pointCount))
  const spacing = 0.05 // ~5.5km spacing
  
  for (let i = 0; i < pointCount; i++) {
    const row = Math.floor(i / gridSize)
    const col = i % gridSize
    
    // Offset from center
    const latOffset = (row - gridSize / 2) * spacing
    const lonOffset = (col - gridSize / 2) * spacing
    
    // Add some randomness for realistic distribution
    const randomLat = latOffset + (Math.random() - 0.5) * spacing * 0.3
    const randomLon = lonOffset + (Math.random() - 0.5) * spacing * 0.3
    
    // Base density varies by distance from center (urban areas higher)
    const distanceFromCenter = Math.sqrt(latOffset ** 2 + lonOffset ** 2)
    const baseDensity = Math.max(0.3, 1.0 - distanceFromCenter * 2)
    
    // Add random variation
    const density = Math.min(1.0, Math.max(0.1, baseDensity + (Math.random() - 0.5) * 0.3))
    
    data.push({
      lat: center[0] + randomLat,
      lng: center[1] + randomLon,
      density: density
    })
  }
  
  return data
}

/**
 * Get vulnerability data for a specific location
 * If location is provided, uses that; otherwise uses Raipur center
 */
export const getVulnerabilityData = (location = null) => {
  if (location && Array.isArray(location) && location.length === 2) {
    return generateVulnerabilityData(location, 50)
  }
  return generateVulnerabilityData(RAIPUR_CENTER, 50)
}

